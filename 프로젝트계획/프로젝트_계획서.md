# 50W 고주파 변압기 기반 공진형 DC‑DC 컨버터 계획서

작성자: harry  
보드: ST NUCLEO‑H533RE (STM32H5)  
목표: 학부 실습 과목 수준에서 “작동 우선, 안전/보호 확보 → 성능 개선” 순으로 달성

> 표기 [TBD] 항목은 확정 필요. 초기 1주차에 결정 및 문서 업데이트.

## 1) 프로젝트 개요
- 목표 출력: 50W 급 DC‑DC 컨버터 구현 (고주파 변압기 + 공진 탱크 사용, 절연형).
- 제어 대상: 10 kHz 고정 주파수 PWM에 의한 듀티 제어(게이트드라이버 → MOSFET → 변압기 → 2다이오드 정류 → 출력 캐패시터).
- 성공 기준: 50W 근방의 안정 운전, 기본 보호 동작, 합리적 효율과 리플, 최종 데모(12V로 모니터 직접 구동) 및 보고서.

## 2) 목표 및 성능 지표
- 정격 출력: 12 V, 최대 약 50 W (연속 운전 기준)
- 입력 전압: 30 V DC, CV 모드 (공급기 전류 제한 약 3 A)
- 절연: 고주파 변압기 이용(안전거리/절연 고려), 2차 접지 정책 정의
- 스위칭 주파수: 10 kHz 고정, 듀티 0–Dmax 제어 (Dmax TBD, 초기 0.4–0.7 탐색)
- 리플/정확도: V_out 리플/정확도 목표는 부품/탱크 값 선정 후 확정
- 효율: 중부하 지점에서 합리적 효율(목표 수치 TBD) 확보, 열 안전 우선

## 3) 요구사항 및 제약
- 보드 제약: TIM1으로 10 kHz PWM, 듀티 가변, 브레이크 입력(하드웨어 KILL) 사용. ADC는 타이머 트리거 + DMA.
- 부품 조달: 변압기 코어/권선, 고속 다이오드, MOSFET, 게이트드라이버, 공진용 필름 C, 스너버류 리드타임 고려.
- 안전: 초기가동은 저전압/전류제한 전원 사용, KILL 스위치/퓨즈/절연 프로브 준비.

## 4) 시스템 개략 구성
- 1차: PWM(10 kHz) → 게이트드라이버(로우사이드) → 단일 MOSFET → (누설 L을 Lr로 활용) + 직렬 Cr 공진 → 변압기(고주파, 1차/2차 절연)
- 2차: 센터탭 변압기 2차 + 고속 다이오드 2개(정류) + 출력 캐패시터(필요 시 소형 LC 추가)
- 제어: MCU(TIM1 PWM 듀티 제어, ADC DMA, UART)로 V_out PI 제어(듀티)
- 보호: OCP/OVP/UVLO/OTP, 브레이크 입력, 결함 래치 및 복귀 로직

## 5) 토폴로지 및 제어 전략
- 토폴로지: 단일 MOSFET 구동의 직렬 공진(누설 L + Cr) 전력단 + 2차 CT 정류(다이오드)
- 제어: 10 kHz 고정 주파수에서 듀티 가변으로 V_out 조절(PI 외부 루프)
- 시동: 소프트스타트(듀티 0 → 목표까지 램프), 과전류 제한 동반

## 6) 사양 확정 체크리스트
- 입력 전압: 30 V CV (공급기 전류 제한 ≈ 3 A) [확정]
- 출력 사양: 12 V, ~50 W (리플/오차 목표 수치는 탱크/출력 C 선정 후) [부분확정]
- 절연 요구: 예(변압기), 절연전압/안전거리 기준 정리 [TBD]
- 공진 설계: 누설 L 목표 범위, 직렬 Cr 값, 변압기 권선비/코어 선정 [TBD]
- 듀티 제한: d_min/d_max(예: 0–0.6 초기) 및 소프트스타트 램프 기울기 [TBD]

## 7) 일정 / 마일스톤(예시 12주)
- 주1: 요구사항 확정(30 V/12 V/50 W/10 kHz), 위험 식별, 부품 예산/조달 계획 수립
- 주2: 공진 파라미터 1차 산정(누설 L 목표/Cr 가늠), 변압기 코어/권선 구조 구상, 부품 선정
- 주3: 펌웨어 스켈레톤(UART/타이머/ADC DMA) 구현 및 벤치 검증(무전력, 10 kHz PWM 확인)
- 주4: 상세 회로도/PCB 초안, 부품 주문(코어/필름C/모스펫/드라이버/다이오드)
- 주5: 저전력 구동 실험(더미로드, 저입력전압), 파형/리플 검증, 보호 동작 확인
- 주6: 듀티 기반 전압 제어(PI) 구현, 10–30 W 영역 검증
- 주7: ~50 W 확장, 열/효율 측정, 스너버/Cr 조정
- 주8: 레이아웃/부품 미세조정, 파형 개선(벨소리/링잉 억제)
- 주9: 안정성/효율 튜닝, 데이터 수집(효율/파형/온도)
- 주10: 데모 리허설(모니터 구동), 이슈 수정
- 주11: 최종 실험 반복, 문서/발표자료 정리
- 주12: 최종 발표 및 제출(데모 포함)

## 8) 하드웨어 설계 계획
- 변압기/공진: 10 kHz 대응 코어 선정, 권선비 결정(30 V → 12 V), 누설 L 활용 설계, 직렬 Cr 계산, 온도상승/손실 예측
- 스위치/정류: 단일 MOSFET 전압/전류/스위칭 손실 산정, 2차 고속 다이오드(CT 정류) 선정(필요시 SR 후순위 검토)
- 게이트드라이버: 로우사이드 드라이버(강한 소스/싱크, UVLO), 하드웨어 KILL 경로 확보
- 센싱: 분압(입출력), 전류센스(샌트+증폭/CT), 필터/대역폭 최적화
- 보호: 입력퓨즈/스너버/TVS, OCP/OVP/UVLO/OTP 경로, 브레이크 신호
- 레이아웃: 스위칭 루프/탱크 루프 최소화, 켈빈센스, 아날로그 GND 정리

## 9) 펌웨어 설계 계획
- PWM: TIM1 10 kHz PWM, 듀티 가변, 브레이크(긴급정지)
- ADC: 타이머 트리거 샘플링, DMA, 스케일링/보정
- 제어루프: 고정 주기 컨트롤 틱(예: 5–10 kHz), V_out PI → 듀티 제한[d_min,d_max]
- 상태머신: INIT → PRECHARGE → SOFT_START → RUN → FAULT(래치/복귀)
- 텔레메트리: UART CLI(파라미터 조회/수정, 로그, Fault 리드백)
- 파라미터: config 헤더로 보호 한계/루프 게인/듀티 한계 관리

## 10) 시험 및 검증 계획
- 단계적 부하: 10%, 25%, 50%, 75%, 100%에서 효율/온도 측정
- 파형 측정: 게이트 Vgs, 스위칭 노드, 공진 전압/전류, 출력 리플
- 보호시험: 과전류/과전압/저입력/과열 상황 재현(저에너지 조건)
- 열측정: MOSFET/변압기/정류부/드라이버 온도 확인
- EMI 간이점검: 근접필드/AM 라디오 등으로 링잉/노이즈 확인

## 11) 안전 수칙
- 초기: 저전압, 전류 제한, 절연 전원 사용. 한 손 규칙/보안경/정리정돈.
- 장비: 절연 프로브, KILL 스위치, 절연 매트, 화재 대비.
- 문서화: 시험 단계별 체크리스트와 비상 절차 기록.

## 12) 위험요인 및 대응
- 10 kHz 저주파 스위칭: 변압기/출력 C 용량 증가 요구 → 코어/방열 여유, 리플 관리
- 누설 L 의존도 높음: 권선/레이아웃으로 조정 가능하도록 설계, Cr 가변 여유
- 스위칭 링잉/EMI: 스너버/댐핑, 루프 최소화, 구리면/그라운드 설계 주의
- 부품 리드타임: 코어/필름C/드라이버 우선 발주, 대체부품 리스트 준비
- 백업안: 최소 시연을 위한 하드스위칭/비절연 벅 간이안 유지

## 13) 준비물 및 장비
- 전원장치(절연, 전류제한), 오실로스코프, 차동/전류 프로브, 멀티미터 2대 이상, IR 카메라(있으면)
- NUCLEO‑H533RE 보드, 게이트드라이버(로우사이드), MOSFET, 변압기 코어/권선재, 공진용 필름 C, 정류 다이오드
- 방열판/서멀패드, 스너버 소자, 샌트/증폭기, NTC

## 14) 제출물(최종)
- 설계문서: 사양, 회로, 공진/변압기 계산, 보호설계 근거
- 펌웨어: 빌드/플래시 방법, 주요 파라미터 표, 상태도
- 시험결과: 효율 곡선/파형/온도/보호시험 로그, 분석
- 데모: 12 V로 모니터 직접 구동(안정/보호 확인 후)

## 15) 다음 할 일(즉시)
- [ ] 변압기 권선비 1차 산정(30 V → 12 V, 10 kHz, 듀티 여유 고려)
- [ ] 누설 L 목표와 직렬 Cr 초안 값 계산(부하점 기준 게인)
- [ ] 게이트드라이버/MOSFET/다이오드/출력 C 1차 BOM 작성 및 재고 확인
- [ ] 펌웨어 스켈레톤(클럭/GPIO/UART/TIM1 10 kHz/ADC DMA) 프로젝트 생성
- [ ] 벤치(무전력)에서 PWM/ADC 파형 및 보호 신호 확인
